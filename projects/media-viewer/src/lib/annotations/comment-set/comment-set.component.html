<div #container
     [ngClass]="{ 'right comment-container': true, 'show-comments-panel': showCommentsPanel }"
     [style.height.px]="height" (click)="onContainerClick($event)">
  <button [ngClass]="{ 'toolbarButton': true, 'collapsed': showCommentsPanel, 'expanded': !showCommentsPanel }"
          aria-label="Toggle Comments Panel"
          class="toolbarButton" title="Tools" tabindex="0" data-l10n-id="tools"
          (click)="toggleCommentsPanel()">
    <span data-l10n-id="tools_label">Tools</span>
  </button>
  <ng-container *ngFor="let annotation of getCommentsOnPage(); let i = index">
    <mv-anno-comment
      #commentComponent
      *ngIf="annotation.comments[0]"
      (commentClick)="onSelect($event)"
      (delete)="onCommentDelete($event)"
      (updated)="onCommentUpdate($event)"
      (unsavedChanges)="onCommentChange($event)"
      [selected]="annotation.comments[0].annotationId === selectAnnotation.annotationId"
      [editable]="annotation.comments[0].annotationId === selectAnnotation.annotationId ? selectAnnotation.editable : false"
      [zoom]="zoom"
      [rotate]="rotate"
      [index]="i"
      [comment]="annotation.comments[0]"
      [rectangle]="topRectangle(annotation.comments[0].annotationId)"
      (commentRendered)="redrawCommentComponents()">
    </mv-anno-comment>
  </ng-container>
</div>
