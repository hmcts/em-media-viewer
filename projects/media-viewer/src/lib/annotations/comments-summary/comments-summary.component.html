<div id="modal-background" class="modal" (click)="onClose()">
  <div id="modal" class="modal-content govuk-width-container clearfix" (click)="$event.stopPropagation()">
    <div id="comment-container" class="comment-container" #commentContainer>
      <h2 class="govuk-heading-m">{{ title }}</h2>
      <ng-container *ngIf="(comments$ | async) as comments">
        <ng-container *ngIf="comments.length">
          <form [formGroup]="dateRangeFg" (ngSubmit)="onFilteer()" >
            <div class="dates">
              <div class="dates__from">
                <lib-gov-uk-date
                  [config]="{id: 'dateRangeFrom', legend: 'From'}"
                  [formGroup]="dateRangeFg.controls['dateRangeFrom']"
                  [errorMessage]="'test'"
                ></lib-gov-uk-date>
              </div>
              <div class="dates__to">
                <lib-gov-uk-date
                  [config]="{id: 'dateRangeTo', legend: 'To'}"
                  [formGroup]="dateRangeFg.controls['dateRangeTo']"
                  [errorMessage]="'test'"
                ></lib-gov-uk-date>
              </div>
              <div class="dates__cta">
                <button type="submit" class="govuk-button">
                  Filter comments
                </button>
              </div>
            </div>
          </form>

          <ngx-datatable
            [rows]="comments"
            rowHeight="auto"
            headerHeight="auto"
            [columnMode]="'flex'"
            [sorts]="[{ prop: 'date', dir: 'desc' }]">
            <ngx-datatable-column name="User" [flexGrow]="1" [sortable]="false"></ngx-datatable-column>
            <ngx-datatable-column name="Page" [flexGrow]="1">
              <ng-template ngx-datatable-cell-template let-value="value">
                <a [routerLink]="" class="comment-summary_pages" (click)="navigateToPage(value)">{{value}}</a>
              </ng-template>
            </ngx-datatable-column>
            <ngx-datatable-column name="Date" [flexGrow]="1"></ngx-datatable-column>
            <ngx-datatable-column name="Comment" [flexGrow]="3" [sortable]="false"></ngx-datatable-column>
            <ngx-datatable-column name="Tags" [flexGrow]="1" [sortable]="false">
              <ng-template ngx-datatable-cell-template let-value="value">
                <span class="hmcts-badge" *ngFor="let tag of value">{{tag.label}}</span>
              </ng-template>
            </ngx-datatable-column>
          </ngx-datatable>
        </ng-container>
        <ng-container *ngIf="!comments.length">
          <h3 class="govuk-heading-s" >No comments available</h3>
        </ng-container>
      </ng-container>
    </div>

    <div class="button-container">
      <button (click)="onPrint()" class="govuk-button govuk-button--secondary">Print</button>
      <button id="modal-close-button" (click)="onClose()" class="govuk-button">Close</button>
    </div>
  </div>
</div>
