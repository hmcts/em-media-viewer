<mv-side-bar *ngIf="toolbarEvents.sidebarOpen"
             id="sidebarContainer"
             [url]="url"
             [zoom]="zoom"
             [rotate]="rotation"
             [outline]="documentOutline"
             [annotationsEnabled]="enableAnnotations">
</mv-side-bar>

<mv-comment-set-header
  *ngIf="enableAnnotations"
  [ngClass]="{'show-comments-panel': showCommentsPanel}"
  [showCommentSummary]="toolbarButtons.showCommentSummary"
  (showCommentSummaryDialog)="toggleCommentsSummary()">
</mv-comment-set-header>
<mv-participants-list></mv-participants-list>

<div grabNDrag [dragY]="enableGrabNDrag"
     #viewerContainer
     class="pdfContainer"
     [ngStyle]="{ height: height }"
     [ngClass]="{ 'pdfContainer': true, 'annotations': enableAnnotations, hidden: errorMessage, 'show-comments-panel': (showCommentsPanel || showIcpParticipantsList), 'grabNDrag': enableGrabNDrag }">
  <div grabNDrag [dragX]="enableGrabNDrag"
       #pdfViewer
       class="pdfViewer"
       (mouseup)="onMouseUp($event)"
       (mousedown)="onPdfViewerClick()"
       [ngClass]="{ hidden: loadingDocument, highlightMode: highlightMode | async, drawMode: drawMode | async }">
  </div>

  <mv-redactions *ngIf="(toolbarEvents.redactionMode | async);else annotationTemplate"
                 [zoom]="zoom"
                 [rotate]="rotation"
  ></mv-redactions>

  <ng-template #annotationTemplate>
    <mv-annotation-set
      *ngIf="enableAnnotations && annotationSet"
      [zoom]="zoom"
      [rotate]="rotation">
    </mv-annotation-set>
    <mv-comment-set #commentsPanel
                    *ngIf="enableAnnotations && annotationSet"
                    [annotationSet]="annotationSet"
                    [zoom]="zoom"
                    [rotate]="rotation"
                    [height]="pdfViewer.offsetHeight"
                    [pageHeights]="pageHeights">
    </mv-comment-set>
    <mv-bookmark-icons [zoom]="zoom"
                       [rotate]="rotation">
    </mv-bookmark-icons>
  </ng-template>

  <div class="loadingMessage" [ngClass]="{ hidden: !loadingDocument }">
    Loading...{{ loadingDocumentProgress ? loadingDocumentProgress + '%' : '' }}
  </div>
</div>
