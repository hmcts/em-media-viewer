<div id="outerContainer"
     [ngClass]="{
       'has-redact-bar': toolbarEvents.redactionMode | async,
       'icp-mode': toolbarEvents.icp.enabled | async,
       'is-redaction-preview': toolbarEvents.redactionPreview | async,
       sidebarOpen: toolbarEvents.sidebarOpen | async,
       'has-scroll-bar': hasScrollBar,
       'has-different-page-size': hasDifferentPageSize$ | async
     }"
     [ngStyle]="{ width: width }">

  <mv-comments-summary *ngIf="showCommentSummary"
                       [title]="documentTitle || 'Comment Summary'"
                       [contentType]="contentType">
  </mv-comments-summary>

  <mv-confirm-action *ngIf="toolbarEvents.icp.leavingSession | async"></mv-confirm-action>

  <div id="mainContainer">
    <mv-main-toolbar *ngIf="showToolbar"
                     [enableAnnotations]="enableAnnotations"
                     [enableICP]="enableICP"
                     [enableRedactions]="enableRedactions"
                     [contentType]="contentType"
                     >
    </mv-main-toolbar>
    <mv-redaction-toolbar *ngIf="toolbarEvents.redactionMode | async"></mv-redaction-toolbar>
    <mv-icp-toolbar *ngIf="toolbarEvents.icp.enabled | async"></mv-icp-toolbar>

    <mv-conversion-viewer *ngIf="contentTypeConvertible()"
                          (documentTitle)="onDocumentTitleChange($event)"
                          (mediaLoadStatus)="onMediaLoad($event)"
                          (viewerException)="onLoadException($event)"
                          [enableAnnotations]="enableAnnotations"
                          [enableRedactions]="enableRedactions"
                          [annotationSet]="enableAnnotations ? (annotationSet$ | async) : null"
                          [originalUrl]="url"
                          [downloadFileName]="downloadFileName"
                          [height]="height"
                          mvRotationPersist>
    </mv-conversion-viewer>
    <mv-pdf-viewer *ngIf="contentType === 'pdf'"
                   (mediaLoadStatus)="onMediaLoad($event)"
                   (pdfViewerException)="onLoadException($event)"
                   (documentTitle)="onDocumentTitleChange($event)"
                   [url]="url"
                   [enableAnnotations]="enableAnnotations"
                   [enableRedactions]="enableRedactions"
                   [enableICP]="enableICP"
                   [annotationSet]="enableAnnotations ? (annotationSet$ | async) : null"
                   [downloadFileName]="downloadFileName"
                   [height]="height"
                   [caseId]="caseId"
                   mvRotationPersist>
    </mv-pdf-viewer>
    <mv-image-viewer *ngIf="contentType === 'image'"
                     (mediaLoadStatus)="onMediaLoad($event)"
                     (imageViewerException)="onLoadException($event)"
                     [url]="url"
                     [enableAnnotations]="enableAnnotations"
                     [annotationSet]="enableAnnotations ? (annotationSet$ | async) : null"
                     [downloadFileName]="downloadFileName"
                     [height]="height"
                     mvRotationPersist>
    </mv-image-viewer>
    <mv-unsupported-viewer *ngIf="contentTypeUnsupported()"
                           [url]="url"
                           [typeException]="typeException"
                           [downloadFileName]="downloadFileName"
                           (loadStatus)="onMediaLoad($event)"
                           (unsupportedViewerException)="onLoadException($event)">
    </mv-unsupported-viewer>
  </div>
</div>
